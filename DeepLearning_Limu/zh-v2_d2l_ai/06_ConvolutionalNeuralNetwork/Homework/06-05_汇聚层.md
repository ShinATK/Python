### 6.5.5 练习

#### 1.尝试将平均汇聚层作为卷积层的特殊情况实现

```python
def corr2d(X, K):
    h, w = K.shape
    Y = torch.zeros((X.shape[0] -h + 1, X.shape[1] -w +1))
    for i in range(Y.shape[0]):
        for j in range(Y.shape[1]):
            Y[i, j] = (X[i:i+h, j:j+w] * K).mean()
    return Y
```
主要在进行对窗口内元素求和改为取平均

#### 2.尝试将最大汇聚层作为卷积层的特殊情况实现。

```python
def corr2d(X, K):
    h, w = K.shape
    Y = torch.zeros((X.shape[0] -h + 1, X.shape[1] -w +1))
    for i in range(Y.shape[0]):
        for j in range(Y.shape[1]):
            Y[i, j] = (X[i:i+h, j:j+w] * K).max()
    return Y
```


#### 3.假设汇聚层的输入$p_w \times p_w$大小为$c \times h \times w$，则汇聚窗口的形状为$p_h \times p_w$，填充为$(p_h, p_w)$，步幅为$(s_h, s_w)$。这个汇聚层的计算成本是多少？



#### 4.为什么最大汇聚层和平均汇聚层的工作方式不同？

#### 5.我们是否需要最小汇聚层？可以用已知函数替换它吗？

不需要。由于输入数据一般会进行正则化，使用最小汇聚层容易导致输出一大堆0，从而丢失重要的数据信息。

如果必须要将最小汇聚层引入网络，可以在传入之前对所有数据取相反数，经过汇聚层后再取相反数，从而最小汇聚层等价实现了最大汇聚层的作用。但多此一举。

#### 6.除了平均汇聚层和最大汇聚层，是否有其它函数可以考虑（提示：回想一下softmax）？为什么它不流行？

从数据的角度来说，无论是取平均还是取最大，还是利用softmax进行压缩，本质上都是为了降低网络对图像的像素位置敏感性。理论上来说，应该能够满足不影响图片整体上各个位置像素大小相对关系，即保留图像的空间结构，并将多组相邻数据转换为更少数量的数据的单调函数都可以。但就和ReLU作为激活函数一样，使用取平均和取最大的汇聚层已经能够满足这种需求。

softmax函数理论上也可以满足汇聚层的需求，但是softmax中具有指数运算，运算更复杂，同时也会有着数据溢出的风险。

